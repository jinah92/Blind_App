{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\multicampus_coding\\\\ReactProject\\\\blind\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Button,Badge,Form}from'react-bootstrap';import axios,{post}from'axios';import $ from'jquery';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogTitle from'@material-ui/core/DialogTitle';import TextField from'@material-ui/core/TextField';import{withStyles}from'@material-ui/core/styles';var styles=function styles(theme){return{hidden:{display:'none'}};};var SendMessage=/*#__PURE__*/function(_Component){_inherits(SendMessage,_Component);function SendMessage(props){var _this;_classCallCheck(this,SendMessage);_this=_possibleConstructorReturn(this,_getPrototypeOf(SendMessage).call(this,props));_this.handleValueChange=function(e){var nextState={};nextState[e.target.name]=e.target.value;_this.setState(nextState);};_this.sendMessage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var sendee_id,sender_id,sender_nick,message,send_param,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:sendee_id=_this.props.userId;sender_id=$.cookie(\"login_id\");sender_nick=$.cookie('login_nick');message=_this.text.value;console.log(message);send_param={sendee_id:sendee_id,sender_id:sender_id,sender_nick:sender_nick,message:message};_context.prev=6;_context.next=9;return axios.post('http://localhost:9090/message/send',send_param);case 9:result=_context.sent;if(result.data.message){alert('쪽지보내기 성공');_this.handleClose();}else{alert('쪽지보내기 실패');}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[6,13]]);}));_this.handleClickOpen=function(){_this.setState({open:true});};_this.handleClose=function(){_this.setState({file:null,message:'',birthday:'',gender:'',job:'',fileName:'',open:false});};_this.ShowMessage=function(){var nick=_this.props.user;if($.cookie('login_nick')===nick){_this.setState({show:'hidden'});}else{_this.setState({show:'visible'});}};_this.state={file:null,message:'',birthday:'',gender:'',job:'',fileName:'',open:false,show:'visible'};/* this.handleFormSubmit = this.handleFormSubmit.bind(this)\r\n        this.handleFileChange = this.handleFileChange.bind(this)\r\n        this.handleValueChange = this.handleValueChange.bind(this)\r\n        this.addCustomer = this.addCustomer.bind(this)\r\n        this.handleClickOpen = this.handleClickOpen.bind(this)\r\n        this.handleClose = this.handleClose.bind(this); */return _this;}_createClass(SendMessage,[{key:\"componentDidMount\",value:function componentDidMount(){this.ShowMessage();}},{key:\"render\",value:function render(){var _this2=this;var div_style={visibility:this.state.show,float:\"right\"};return React.createElement(\"div\",{style:div_style},React.createElement(Badge,{variant:\"info\",onClick:this.handleClickOpen},\"\\uCABD\\uC9C0\"),React.createElement(Dialog,{open:this.state.open,onClose:this.handleClose},React.createElement(DialogTitle,null,\"\\uCABD\\uC9C0 \\uBCF4\\uB0B4\\uAE30\"),React.createElement(DialogContent,null,React.createElement(Form.Control,{label:\"\\uBCF4\\uB0B4\\uC2E4 \\uB0B4\\uC6A9\",as:\"textarea\",rows:\"10\",cols:\"50\",ref:function ref(_ref2){return _this2.text=_ref2;}})),React.createElement(DialogActions,null,React.createElement(Button,{variant:\"dark\",size:\"sm\",onClick:this.sendMessage},\"\\uBCF4\\uB0B4\\uAE30\"),React.createElement(Button,{variant:\"dark\",size:\"sm\",onClick:this.handleClose},\"\\uB2EB\\uAE30\"))));}}]);return SendMessage;}(Component);export default withStyles(styles)(SendMessage);","map":{"version":3,"sources":["D:/multicampus_coding/ReactProject/blind/src/message/sendmessage.jsx"],"names":["React","Component","Button","Badge","Form","axios","post","$","Dialog","DialogActions","DialogContent","DialogTitle","TextField","withStyles","styles","theme","hidden","display","SendMessage","props","handleValueChange","e","nextState","target","name","value","setState","sendMessage","sendee_id","userId","sender_id","cookie","sender_nick","message","text","console","log","send_param","result","data","alert","handleClose","handleClickOpen","open","file","birthday","gender","job","fileName","ShowMessage","nick","user","show","state","div_style","visibility","float","ref"],"mappings":"k5BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,MAAR,CAAgBC,KAAhB,CAAuBC,IAAvB,KAAkC,iBAAlC,CACA,MAAOC,CAAAA,KAAP,EAAeC,IAAf,KAA0B,OAA1B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,QAAK,CACrBC,MAAM,CAAE,CACNC,OAAO,CAAE,MADH,CADa,CAAL,EAApB,C,GAMMC,CAAAA,W,qEACF,qBAAYC,KAAZ,CAAmB,6CACf,6EAAMA,KAAN,GADe,MAmBnBC,iBAnBmB,CAmBD,SAACC,CAAD,CAAK,CACnB,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAACD,CAAC,CAACE,MAAF,CAASC,IAAV,CAAT,CAA2BH,CAAC,CAACE,MAAF,CAASE,KAApC,CACA,MAAKC,QAAL,CAAcJ,SAAd,EACH,CAvBkB,OAwBnBK,WAxBmB,sEAwBP,iMACFC,SADE,CACQ,MAAKT,KAAL,CAAWU,MADnB,CAEFC,SAFE,CAEQvB,CAAC,CAACwB,MAAF,CAAS,UAAT,CAFR,CAGFC,WAHE,CAGUzB,CAAC,CAACwB,MAAF,CAAS,YAAT,CAHV,CAIFE,OAJE,CAIM,MAAKC,IAAL,CAAUT,KAJhB,CAKRU,OAAO,CAACC,GAAR,CAAYH,OAAZ,EACMI,UANE,CAMS,CAACT,SAAS,CAATA,SAAD,CAAYE,SAAS,CAATA,SAAZ,CAAuBE,WAAW,CAAXA,WAAvB,CAAoCC,OAAO,CAAPA,OAApC,CANT,uCAQgB5B,CAAAA,KAAK,CAACC,IAAN,CAAW,oCAAX,CAAiD+B,UAAjD,CARhB,QAQEC,MARF,eASJ,GAAGA,MAAM,CAACC,IAAP,CAAYN,OAAf,CAAuB,CACnBO,KAAK,CAAC,UAAD,CAAL,CACA,MAAKC,WAAL,GACH,CAHD,IAGK,CACDD,KAAK,CAAC,UAAD,CAAL,CACH,CAdG,iFAgBJL,OAAO,CAACC,GAAR,cAhBI,qEAxBO,SA4CnBM,eA5CmB,CA4CH,UAAI,CAChB,MAAKhB,QAAL,CAAc,CACViB,IAAI,CAAE,IADI,CAAd,EAGH,CAhDkB,OAiDnBF,WAjDmB,CAiDP,UAAI,CACZ,MAAKf,QAAL,CAAc,CACVkB,IAAI,CAAE,IADI,CAEVX,OAAO,CAAE,EAFC,CAGVY,QAAQ,CAAE,EAHA,CAIVC,MAAM,CAAE,EAJE,CAKVC,GAAG,CAAE,EALK,CAMVC,QAAQ,CAAE,EANA,CAOVL,IAAI,CAAE,KAPI,CAAd,EASH,CA3DkB,OA+DnBM,WA/DmB,CA+DP,UAAI,CACZ,GAAIC,CAAAA,IAAI,CAAC,MAAK/B,KAAL,CAAWgC,IAApB,CACA,GAAG5C,CAAC,CAACwB,MAAF,CAAS,YAAT,IAA2BmB,IAA9B,CAAmC,CAC/B,MAAKxB,QAAL,CAAc,CAAC0B,IAAI,CAAE,QAAP,CAAd,EACH,CAFD,IAEK,CACD,MAAK1B,QAAL,CAAc,CAAC0B,IAAI,CAAE,SAAP,CAAd,EACH,CACJ,CAtEkB,CAEf,MAAKC,KAAL,CAAa,CACTT,IAAI,CAAE,IADG,CAETX,OAAO,CAAE,EAFA,CAGTY,QAAQ,CAAE,EAHD,CAITC,MAAM,CAAE,EAJC,CAKTC,GAAG,CAAE,EALI,CAMTC,QAAQ,CAAE,EAND,CAOTL,IAAI,CAAE,KAPG,CAQTS,IAAI,CAAE,SARG,CAAb,CAUA;;;;;0DAZe,aAkBlB,C,qFA0CkB,CACf,KAAKH,WAAL,GACH,C,uCASO,iBACJ,GAAMK,CAAAA,SAAS,CAAC,CACZC,UAAU,CAAE,KAAKF,KAAL,CAAWD,IADX,CAEZI,KAAK,CAAE,OAFK,CAAhB,CAIA,MACI,4BAAK,KAAK,CAAEF,SAAZ,EACI,oBAAC,KAAD,EAAO,OAAO,CAAC,MAAf,CAAsB,OAAO,CAAE,KAAKZ,eAApC,iBADJ,CAEI,oBAAC,MAAD,EAAQ,IAAI,CAAE,KAAKW,KAAL,CAAWV,IAAzB,CAA+B,OAAO,CAAE,KAAKF,WAA7C,EACI,oBAAC,WAAD,wCADJ,CAEI,oBAAC,aAAD,MACI,oBAAC,IAAD,CAAM,OAAN,EAAe,KAAK,CAAC,iCAArB,CAA8B,EAAE,CAAC,UAAjC,CAA4C,IAAI,CAAC,IAAjD,CAAsD,IAAI,CAAC,IAA3D,CAAgE,GAAG,CAAE,aAAAgB,KAAG,QAAE,CAAA,MAAI,CAACvB,IAAL,CAAUuB,KAAZ,EAAxE,EADJ,CAFJ,CAKI,oBAAC,aAAD,MACI,oBAAC,MAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,IAAI,CAAC,IAA5B,CAAiC,OAAO,CAAE,KAAK9B,WAA/C,uBADJ,CAEI,oBAAC,MAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,IAAI,CAAC,IAA5B,CAAiC,OAAO,CAAE,KAAKc,WAA/C,iBAFJ,CALJ,CAFJ,CADJ,CAeH,C,yBA5FqBxC,S,EA+F1B,cAAeY,CAAAA,UAAU,CAACC,MAAD,CAAV,CAAmBI,WAAnB,CAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport {Button, Badge, Form} from 'react-bootstrap';\r\nimport axios, {post} from 'axios';\r\nimport $ from 'jquery';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n    hidden: {\r\n      display: 'none'\r\n    }\r\n});\r\n\r\nclass SendMessage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            file: null,\r\n            message: '',\r\n            birthday: '',\r\n            gender: '',\r\n            job: '',\r\n            fileName: '',\r\n            open: false,\r\n            show: 'visible'\r\n        }\r\n        /* this.handleFormSubmit = this.handleFormSubmit.bind(this)\r\n        this.handleFileChange = this.handleFileChange.bind(this)\r\n        this.handleValueChange = this.handleValueChange.bind(this)\r\n        this.addCustomer = this.addCustomer.bind(this)\r\n        this.handleClickOpen = this.handleClickOpen.bind(this)\r\n        this.handleClose = this.handleClose.bind(this); */\r\n    }\r\n    handleValueChange=(e)=>{\r\n        let nextState = {};\r\n        nextState[e.target.name] = e.target.value;\r\n        this.setState(nextState);\r\n    }\r\n    sendMessage=async()=>{\r\n        const sendee_id=this.props.userId;\r\n        const sender_id=$.cookie(\"login_id\");\r\n        const sender_nick=$.cookie('login_nick');\r\n        const message=this.text.value;\r\n        console.log(message);\r\n        const send_param={sendee_id, sender_id, sender_nick, message};\r\n        try{\r\n            const result= await axios.post('http://localhost:9090/message/send', send_param);\r\n            if(result.data.message){\r\n                alert('쪽지보내기 성공');\r\n                this.handleClose();\r\n            }else{\r\n                alert('쪽지보내기 실패');\r\n            }\r\n        }catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    handleClickOpen=()=>{\r\n        this.setState({\r\n            open: true\r\n        });\r\n    }\r\n    handleClose=()=>{\r\n        this.setState({\r\n            file: null,\r\n            message: '',\r\n            birthday: '',\r\n            gender: '',\r\n            job: '',\r\n            fileName: '',\r\n            open: false\r\n        })\r\n    }\r\n    componentDidMount(){\r\n        this.ShowMessage();\r\n    }\r\n    ShowMessage=()=>{\r\n        let nick=this.props.user;\r\n        if($.cookie('login_nick') === nick){\r\n            this.setState({show: 'hidden'});\r\n        }else{\r\n            this.setState({show: 'visible'});\r\n        }\r\n    }\r\n    render(){\r\n        const div_style={\r\n            visibility: this.state.show,\r\n            float: \"right\"\r\n        }\r\n        return(\r\n            <div style={div_style}>\r\n                <Badge variant=\"info\" onClick={this.handleClickOpen}>쪽지</Badge>\r\n                <Dialog open={this.state.open} onClose={this.handleClose}>\r\n                    <DialogTitle>쪽지 보내기</DialogTitle>\r\n                    <DialogContent>\r\n                        <Form.Control  label=\"보내실 내용\" as=\"textarea\" rows='10' cols='50' ref={ref=>this.text=ref}/>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant=\"dark\" size=\"sm\" onClick={this.sendMessage}>보내기</Button>\r\n                        <Button variant=\"dark\" size=\"sm\" onClick={this.handleClose}>닫기</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(SendMessage);"]},"metadata":{},"sourceType":"module"}